
### 集线器与交换机的区别

* 集线器HUB
   * 早期以太网的互连设备
   * 工作在OSI体系结构的物理层
   * 对接收到的信号进行放大、转发
   * 使用集线器作为互连设备的以太网仍然属于共享总线式以太网。集线器互连起来的所有主机共享总线带宽，属于同一个碰撞域和广播域
* 交换机SWITCH
   * 目前以太网中使用最广泛的互连设备
   * 工作在OSI体系结构的数据链路层（也包括物理层）
   * 根据MAC地址对帧进行转发
   * 使用交换机作为互连设备的以太网，称为交换式以太网。交换机可以根据MAC地址过滤帧，即隔离碰撞域
   * 交换机的每个接口是一个独立的碰撞域
   * 交换机隔离碰撞域但不隔离广播域（VLAN除外）

#### 以太网交换机自学习和转发帧的流程
* 以太网交换机工作在**数据链路层**（包括物理层）
* 以太网交换机收到帧后，在帧交换表中查找**帧的目的MAC地址所对应的接口号**，然后通过该接口转发帧
* 以太网交换机是一种即用即插设备，刚上电启动时其内部的帧交换表是空的。随着网络中各主机间的通信，以太网交换机**通过自学习算法**自动逐渐**简历起帧交换表**
* 以太网交换机自学习和转发帧的流程：
   1. 收到帧后进行**登记**，登记的内容为**帧的源MAC地址**及进入交换机的接口号；
   2. 根据**帧的目的MAC地址**和交换机的**帧交换表**对帧进行转发，有以下三种情况：
    * 明确转发：交换机知道应当从哪个（或哪些）接口转发该帧（单播、多播、广播）
    * 盲目转发：交换机不知道应当从哪个端口转发帧，只能将其通过除进入交换机的接口外的其他所有接口转发（也称为泛洪）
    * 明确丢弃：交换机知道不应该转发该帧，将其丢弃
* 帧交换表中的每条记录都有自己的**有效时间**，到期删除，原因如下：
   * 交换机的接口该接了另一台主机
   * 主机更换了网卡

#### 以太网交换机的生成树协议STP
* 以太网交换机使用**生成树协议STP**（Spanning Tree Protocol），可以在增加冗余链路来提高网络可靠性的同时又**避免**网络环路**带来的各种问题**
   * 不论交换机之间采用怎样的物理连接，交换机都能够**自动计算并构建一个逻辑上没有环路的网络**，其逻辑拓扑结构必须是树形的（无逻辑环路）
   * 最终生成的树形逻辑拓扑要**确保连通整个网络**
   * 当首次连接交换机或网络**物理拓扑发生变化时**（有可能是人为改变或故障），交换机都将进行**生成树的重新计算**


### 虚拟局域网VLAN概述

巨大的广播域会带来很多的弊端：广播风暴，难以管理和维护。因此人们想要分隔广播域，可以使用路由器隔离广播域，但其成本较高，因此虚拟局域网的技术诞生了

虚拟局域网VLAN（Virtual Local Area Network）是一种将物理上分散的网络设备虚拟地组合成逻辑上的局域网的技术。它可以将不同的网络设备，如交换机、路由器、计算机等，按照其功能、位置、业务等因素分组，形成一个或多个虚拟局域网，实现不同VLAN之间的隔离和通信。这种技术可以提高网络的可靠性、安全性和灵活性，同时也可以减少网络的管理和维护成本

虚拟局域网技术主要通过在交换机上进行VLAN配置来实现。交换机可以根据不同的标识（如VLAN ID）将其管理的端口分成不同的VLAN组，从而实现不同VLAN之间的隔离和通信。具体实现过程如下：

1. 配置VLAN：管理员可以在交换机上创建和配置不同的VLAN，为每个VLAN分配一个唯一的标识（VLAN ID）。

2. 配置端口：管理员可以将交换机的端口分配给不同的VLAN，在端口上设置VLAN ID，将端口与对应的VLAN关联起来。

3. 数据交换：当数据从一个VLAN中的设备发送到另一个VLAN中的设备时，数据包必须经过交换机来实现跨VLAN通信。交换机根据VLAN ID将数据包转发到对应的VLAN中的目的设备。

4. VLAN间路由：如果需要在不同的VLAN之间进行通信，需要通过路由器来实现。路由器可以连接不同的VLAN，并在它们之间进行数据转发。

通过这种方式，虚拟局域网技术可以实现不同VLAN之间的隔离和通信，提高网络的可靠性、安全性和灵活性。

